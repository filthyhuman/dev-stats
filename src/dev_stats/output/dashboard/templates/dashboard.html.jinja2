<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>dev-stats — {{ repo_name }}</title>
  <style>{{ inline_css }}</style>
</head>
<body>
<div class="layout">

  <!-- Sidebar navigation -->
  <nav class="sidebar">
    <div class="sidebar__title">dev-stats</div>
    <ul class="sidebar__nav" id="sidebar-nav">
      <li><a class="sidebar__link sidebar__link--active" data-tab="tab-overview">Overview</a></li>
      <li><a class="sidebar__link" data-tab="tab-languages">Languages</a></li>
      <li><a class="sidebar__link" data-tab="tab-files">Files</a></li>
      <li><a class="sidebar__link" data-tab="tab-classes">Classes</a></li>
      <li><a class="sidebar__link" data-tab="tab-methods">Methods</a></li>
      <li><a class="sidebar__link" data-tab="tab-hotspots">Hotspots</a></li>
      <li><a class="sidebar__link" data-tab="tab-dependencies">Dependencies</a></li>
      <li><a class="sidebar__link" data-tab="tab-branches">Branches</a></li>
      <li><a class="sidebar__link" data-tab="tab-git">Git</a></li>
      <li><a class="sidebar__link" data-tab="tab-quality">Quality Gates</a></li>
    </ul>
  </nav>

  <!-- Main content area -->
  <main class="main">
    <header class="header">
      <h1 class="header__title">{{ repo_name }}</h1>
      <span class="header__path" title="{{ repo_path }}">{{ repo_path }}</span>
    </header>

    <!-- ============================================================ -->
    <!-- Tab: Overview                                                 -->
    <!-- ============================================================ -->
    <section id="tab-overview" class="tab-panel tab-panel--active" data-lazy="false">
      <div class="card-grid">
        <div class="card">
          <div class="card__title">Files</div>
          <div class="card__value">{{ total_files }}</div>
        </div>
        <div class="card">
          <div class="card__title">Total Lines</div>
          <div class="card__value">{{ total_lines }}</div>
        </div>
        <div class="card">
          <div class="card__title">Code Lines</div>
          <div class="card__value">{{ code_lines }}</div>
        </div>
        <div class="card">
          <div class="card__title">Languages</div>
          <div class="card__value">{{ language_count }}</div>
        </div>
        <div class="card">
          <div class="card__title">Classes</div>
          <div class="card__value">{{ total_classes }}</div>
        </div>
        <div class="card">
          <div class="card__title">Functions</div>
          <div class="card__value">{{ total_functions }}</div>
        </div>
        <div class="card">
          <div class="card__title">Commits</div>
          <div class="card__value">{{ commit_count }}</div>
        </div>
        <div class="card">
          <div class="card__title">Branches</div>
          <div class="card__value">{{ branch_count }}</div>
        </div>
        <div class="card">
          <div class="card__title">Contributors</div>
          <div class="card__value">{{ contributor_count }}</div>
        </div>
        <div class="card">
          <div class="card__title">Patterns</div>
          <div class="card__value">{{ pattern_count }}</div>
        </div>
      </div>

      <!-- Language donut chart placeholder -->
      <div class="card">
        <div class="card__title">Language Distribution</div>
        <div class="chart-container">
          <canvas id="chart-lang-donut"></canvas>
        </div>
      </div>

      <!-- LOC over time chart placeholder -->
      {% if has_commits %}
      <div class="card">
        <div class="card__title">LOC Over Time</div>
        <div class="chart-container">
          <canvas id="chart-loc-timeline"></canvas>
        </div>
      </div>
      {% endif %}
    </section>

    <!-- ============================================================ -->
    <!-- Tab: Languages                                                -->
    <!-- ============================================================ -->
    <section id="tab-languages" class="tab-panel" data-lazy="true">
      <div class="card">
        <div class="card__title">Languages ({{ language_count }})</div>
        <div class="filter-bar">
          <input class="filter-bar__input" type="text" placeholder="Filter languages…" data-filter-table="table-languages">
          <span class="filter-bar__count" data-filter-count="table-languages"></span>
        </div>
        <table id="table-languages" class="data-table">
          <thead>
            <tr>
              <th data-sort-type="string">Language</th>
              <th data-sort-type="integer" data-default-desc="true">Files</th>
              <th data-sort-type="integer" data-default-desc="true">Total Lines</th>
              <th data-sort-type="integer" data-default-desc="true">Code Lines</th>
            </tr>
          </thead>
          <tbody>
            {% for lang in languages %}
            <tr>
              <td>{{ lang.name }}</td>
              <td class="num">{{ lang.file_count }}</td>
              <td class="num">{{ lang.total_lines }}</td>
              <td class="num">{{ lang.code_lines }}</td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>

      <!-- Language bar chart placeholder -->
      <div class="card">
        <div class="card__title">Lines by Language</div>
        <div class="chart-container">
          <canvas id="chart-lang-bar"></canvas>
        </div>
      </div>
    </section>

    <!-- ============================================================ -->
    <!-- Tab: Files                                                    -->
    <!-- ============================================================ -->
    <section id="tab-files" class="tab-panel" data-lazy="true">
      <div class="card">
        <div class="card__title">Files ({{ total_files }})</div>
        <div class="filter-bar">
          <input class="filter-bar__input" type="text" placeholder="Filter files…" data-filter-table="table-files">
          <span class="filter-bar__count" data-filter-count="table-files"></span>
        </div>
        <table id="table-files" class="data-table">
          <thead>
            <tr>
              <th data-sort-type="string">Path</th>
              <th data-sort-type="string">Language</th>
              <th data-sort-type="integer" data-default-desc="true">Total Lines</th>
              <th data-sort-type="integer" data-default-desc="true">Code Lines</th>
              <th data-sort-type="integer" data-default-desc="true">Classes</th>
              <th data-sort-type="integer" data-default-desc="true">Functions</th>
            </tr>
          </thead>
          <tbody id="table-files-body">
            <!-- Populated lazily by app.js from data chunks -->
          </tbody>
        </table>
      </div>
    </section>

    <!-- ============================================================ -->
    <!-- Tab: Classes                                                  -->
    <!-- ============================================================ -->
    <section id="tab-classes" class="tab-panel" data-lazy="true">
      <div class="card">
        <div class="card__title">Classes ({{ total_classes }})</div>
        <div class="filter-bar">
          <input class="filter-bar__input" type="text" placeholder="Filter classes…" data-filter-table="table-classes">
          <span class="filter-bar__count" data-filter-count="table-classes"></span>
        </div>
        <table id="table-classes" class="data-table">
          <thead>
            <tr>
              <th data-sort-type="string">Class</th>
              <th data-sort-type="string">File</th>
              <th data-sort-type="integer" data-default-desc="true">Lines</th>
              <th data-sort-type="integer" data-default-desc="true">Methods</th>
              <th data-sort-type="integer" data-default-desc="true">Attributes</th>
            </tr>
          </thead>
          <tbody id="table-classes-body">
            <!-- Populated lazily by app.js from data chunks -->
          </tbody>
        </table>
      </div>
    </section>

    <!-- ============================================================ -->
    <!-- Tab: Methods                                                  -->
    <!-- ============================================================ -->
    <section id="tab-methods" class="tab-panel" data-lazy="true">
      <div class="card">
        <div class="card__title">Methods &amp; Functions ({{ total_methods | int + total_functions | int }})</div>
        <div class="filter-bar">
          <input class="filter-bar__input" type="text" placeholder="Filter methods…" data-filter-table="table-methods">
          <span class="filter-bar__count" data-filter-count="table-methods"></span>
        </div>
        <table id="table-methods" class="data-table">
          <thead>
            <tr>
              <th data-sort-type="string">Name</th>
              <th data-sort-type="string">File</th>
              <th data-sort-type="integer" data-default-desc="true">Lines</th>
              <th data-sort-type="integer" data-default-desc="true">CC</th>
              <th data-sort-type="integer" data-default-desc="true">Parameters</th>
            </tr>
          </thead>
          <tbody id="table-methods-body">
            <!-- Populated lazily by app.js from data chunks -->
          </tbody>
        </table>
      </div>
    </section>

    <!-- ============================================================ -->
    <!-- Tab: Hotspots                                                 -->
    <!-- ============================================================ -->
    <section id="tab-hotspots" class="tab-panel" data-lazy="true">
      {% if has_churn %}
      <div class="card">
        <div class="card__title">Churn vs Complexity</div>
        <div class="chart-container">
          <canvas id="chart-hotspots"></canvas>
        </div>
      </div>
      <div class="card">
        <div class="card__title">Hotspot Files</div>
        <table id="table-hotspots" class="data-table">
          <thead>
            <tr>
              <th data-sort-type="string">File</th>
              <th data-sort-type="integer" data-default-desc="true">Commits</th>
              <th data-sort-type="integer" data-default-desc="true">Churn</th>
              <th data-sort-type="integer" data-default-desc="true">Insertions</th>
              <th data-sort-type="integer" data-default-desc="true">Deletions</th>
            </tr>
          </thead>
          <tbody id="table-hotspots-body">
            <!-- Populated lazily by app.js from data chunks -->
          </tbody>
        </table>
      </div>
      {% else %}
      <div class="card">
        <div class="card__title">Hotspots</div>
        <p>No churn data available. Run with git analysis enabled.</p>
      </div>
      {% endif %}
    </section>

    <!-- ============================================================ -->
    <!-- Tab: Dependencies                                             -->
    <!-- ============================================================ -->
    <section id="tab-dependencies" class="tab-panel" data-lazy="true">
      {% if has_coupling %}
      <div class="card">
        <div class="card__title">Module Instability</div>
        <div class="chart-container">
          <canvas id="chart-instability"></canvas>
        </div>
      </div>
      <div class="card">
        <div class="card__title">Module Coupling</div>
        <table id="table-coupling" class="data-table">
          <thead>
            <tr>
              <th data-sort-type="string">Module</th>
              <th data-sort-type="integer" data-default-desc="true">Ca</th>
              <th data-sort-type="integer" data-default-desc="true">Ce</th>
              <th data-sort-type="float" data-default-desc="true">Instability</th>
              <th data-sort-type="float" data-default-desc="true">Abstractness</th>
              <th data-sort-type="float">Distance</th>
            </tr>
          </thead>
          <tbody id="table-coupling-body">
            <!-- Populated lazily by app.js from data chunks -->
          </tbody>
        </table>
      </div>
      {% else %}
      <div class="card">
        <div class="card__title">Dependencies</div>
        <p>No coupling data available.</p>
      </div>
      {% endif %}
    </section>

    <!-- ============================================================ -->
    <!-- Tab: Branches                                                 -->
    <!-- ============================================================ -->
    <section id="tab-branches" class="tab-panel" data-lazy="true">
      {% if has_branches %}
      <div class="card-grid">
        <div class="card">
          <div class="card__title">Total Branches</div>
          <div class="card__value">{{ branch_count }}</div>
        </div>
      </div>

      <!-- Sub-tabs for branch views -->
      <div class="tabs" id="branch-tabs">
        <button class="tab tab--active" data-tab="branch-all">All</button>
        <button class="tab" data-tab="branch-merged">Merged</button>
        <button class="tab" data-tab="branch-unmerged">Unmerged</button>
      </div>

      <div id="branch-all" class="tab-panel tab-panel--active">
        <div class="filter-bar">
          <input class="filter-bar__input" type="text" placeholder="Filter branches…" data-filter-table="table-branches">
          <span class="filter-bar__count" data-filter-count="table-branches"></span>
        </div>
        <table id="table-branches" class="data-table">
          <thead>
            <tr>
              <th data-sort-type="string">Branch</th>
              <th data-sort-type="string">Status</th>
              <th data-sort-type="string">Author</th>
              <th data-sort-type="date">Last Commit</th>
              <th data-sort-type="integer">Ahead</th>
              <th data-sort-type="integer">Behind</th>
              <th data-sort-type="string">Deletability</th>
            </tr>
          </thead>
          <tbody id="table-branches-body">
            <!-- Populated lazily by app.js from data chunks -->
          </tbody>
        </table>
      </div>

      <div id="branch-merged" class="tab-panel">
        <table id="table-branches-merged" class="data-table">
          <thead>
            <tr>
              <th data-sort-type="string">Branch</th>
              <th data-sort-type="string">Author</th>
              <th data-sort-type="date">Last Commit</th>
              <th data-sort-type="string">Merge Type</th>
            </tr>
          </thead>
          <tbody id="table-branches-merged-body"></tbody>
        </table>
      </div>

      <div id="branch-unmerged" class="tab-panel">
        <table id="table-branches-unmerged" class="data-table">
          <thead>
            <tr>
              <th data-sort-type="string">Branch</th>
              <th data-sort-type="string">Status</th>
              <th data-sort-type="string">Author</th>
              <th data-sort-type="date">Last Commit</th>
              <th data-sort-type="integer">Ahead</th>
            </tr>
          </thead>
          <tbody id="table-branches-unmerged-body"></tbody>
        </table>
      </div>
      {% else %}
      <div class="card">
        <div class="card__title">Branches</div>
        <p>No branch data available. Run with git analysis enabled.</p>
      </div>
      {% endif %}
    </section>

    <!-- ============================================================ -->
    <!-- Tab: Git                                                      -->
    <!-- ============================================================ -->
    <section id="tab-git" class="tab-panel" data-lazy="true">
      {% if has_commits %}
      <!-- Sub-tabs for git views -->
      <div class="tabs" id="git-tabs">
        <button class="tab tab--active" data-tab="git-log">Log</button>
        <button class="tab" data-tab="git-contributors">Contributors</button>
        <button class="tab" data-tab="git-tags">Tags</button>
        <button class="tab" data-tab="git-patterns">Patterns</button>
      </div>

      <div id="git-log" class="tab-panel tab-panel--active">
        <div class="card">
          <div class="card__title">Commits ({{ commit_count }})</div>
          <div class="filter-bar">
            <input class="filter-bar__input" type="text" placeholder="Filter commits…" data-filter-table="table-commits">
            <span class="filter-bar__count" data-filter-count="table-commits"></span>
          </div>
          <table id="table-commits" class="data-table">
            <thead>
              <tr>
                <th data-sort-type="string">SHA</th>
                <th data-sort-type="string">Author</th>
                <th data-sort-type="date" data-default-desc="true">Date</th>
                <th data-sort-type="string">Message</th>
                <th data-sort-type="integer" data-default-desc="true">+</th>
                <th data-sort-type="integer" data-default-desc="true">-</th>
              </tr>
            </thead>
            <tbody id="table-commits-body">
              <!-- Populated lazily by app.js from data chunks -->
            </tbody>
          </table>
        </div>
      </div>

      <div id="git-contributors" class="tab-panel">
        {% if has_contributors %}
        <div class="card">
          <div class="card__title">Contributors ({{ contributor_count }})</div>
          <table id="table-contributors" class="data-table">
            <thead>
              <tr>
                <th data-sort-type="string">Name</th>
                <th data-sort-type="string">Email</th>
                <th data-sort-type="integer" data-default-desc="true">Commits</th>
                <th data-sort-type="integer" data-default-desc="true">Insertions</th>
                <th data-sort-type="integer" data-default-desc="true">Deletions</th>
                <th data-sort-type="integer" data-default-desc="true">Files</th>
              </tr>
            </thead>
            <tbody id="table-contributors-body">
              <!-- Populated lazily by app.js from data chunks -->
            </tbody>
          </table>
        </div>
        {% else %}
        <p>No contributor data available.</p>
        {% endif %}
      </div>

      <div id="git-tags" class="tab-panel">
        <div class="card">
          <div class="card__title">Tags</div>
          <table id="table-tags" class="data-table">
            <thead>
              <tr>
                <th data-sort-type="string">Name</th>
                <th data-sort-type="string">SHA</th>
                <th data-sort-type="date" data-default-desc="true">Date</th>
                <th data-sort-type="string">Message</th>
              </tr>
            </thead>
            <tbody id="table-tags-body">
              <!-- Populated lazily by app.js from data chunks -->
            </tbody>
          </table>
        </div>
      </div>

      <div id="git-patterns" class="tab-panel">
        {% if has_patterns %}
        <div class="card">
          <div class="card__title">Detected Patterns ({{ pattern_count }})</div>
          <table id="table-patterns" class="data-table">
            <thead>
              <tr>
                <th data-sort-type="string">Pattern</th>
                <th data-sort-type="string">Severity</th>
                <th data-sort-type="string">Description</th>
                <th data-sort-type="string">Evidence</th>
              </tr>
            </thead>
            <tbody id="table-patterns-body">
              <!-- Populated lazily by app.js from data chunks -->
            </tbody>
          </table>
        </div>
        {% else %}
        <p>No patterns detected.</p>
        {% endif %}
      </div>
      {% else %}
      <div class="card">
        <div class="card__title">Git</div>
        <p>No commit data available. Run with git analysis enabled.</p>
      </div>
      {% endif %}
    </section>

    <!-- ============================================================ -->
    <!-- Tab: Quality Gates                                            -->
    <!-- ============================================================ -->
    <section id="tab-quality" class="tab-panel" data-lazy="true">
      <div class="card">
        <div class="card__title">Quality Gate Summary</div>
        <table id="table-quality" class="data-table">
          <thead>
            <tr>
              <th data-sort-type="string">Metric</th>
              <th data-sort-type="string">Status</th>
              <th data-sort-type="float">Value</th>
              <th data-sort-type="float">Threshold</th>
            </tr>
          </thead>
          <tbody id="table-quality-body">
            <!-- Populated lazily by app.js from data chunks -->
          </tbody>
        </table>
      </div>

      {% if has_coverage %}
      <div class="card">
        <div class="card__title">Test Coverage</div>
        <div class="chart-container">
          <canvas id="chart-coverage"></canvas>
        </div>
      </div>
      {% endif %}

      {% if has_duplication %}
      <div class="card">
        <div class="card__title">Duplication</div>
        <table id="table-duplication" class="data-table">
          <thead>
            <tr>
              <th data-sort-type="string">File A</th>
              <th data-sort-type="string">File B</th>
              <th data-sort-type="integer">Line A</th>
              <th data-sort-type="integer">Line B</th>
              <th data-sort-type="integer" data-default-desc="true">Length</th>
            </tr>
          </thead>
          <tbody id="table-duplication-body">
            <!-- Populated lazily by app.js from data chunks -->
          </tbody>
        </table>
      </div>
      {% endif %}
    </section>

    <!-- Footer -->
    <footer class="card" style="text-align:center;margin-top:2rem;">
      <p>Generated by <strong>dev-stats</strong></p>
    </footer>
  </main>
</div>

<!-- Embedded compressed data chunks -->
{% for chunk_name, chunk_data in data_chunks.items() %}
<script type="application/x-devstats-data" data-chunk="{{ chunk_name }}">{{ chunk_data }}</script>
{% endfor %}

<!-- Chart.js -->
<script>{{ inline_chart_js }}</script>

<!-- Dashboard application logic -->
<script>{{ inline_app_js }}</script>
</body>
</html>
